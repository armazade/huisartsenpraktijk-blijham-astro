---
import Navigation from './Navigation.astro';
import SearchBar from '../ui/SearchBar.astro';
import AccessibilityToggle from '../accessibility/AccessibilityToggle.astro';
import contact from '../../data/contact.json';
---

<header class="bg-white shadow-sm border-b-4 border-primary-600 no-print">
  <!-- Top bar with contact info and accessibility -->
  <div class="bg-primary-700 text-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex flex-wrap items-center justify-between py-2 text-sm">
        <div class="flex items-center gap-4">
          <span class="hidden sm:inline">{contact.address.street}, {contact.address.postal} {contact.address.city}</span>
          <a
            href={`tel:${contact.phone.replace('-', '')}`}
            class="flex items-center gap-1 hover:underline"
          >
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
            </svg>
            {contact.phone}
          </a>
        </div>
        <div class="flex items-center gap-2">
          <AccessibilityToggle />
        </div>
      </div>
    </div>
  </div>

  <!-- Main header with logo and search -->
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex flex-wrap items-center justify-between py-4 gap-4">
      <!-- Logo and practice name -->
      <a href="/" class="flex items-center gap-3 group">
        <div class="w-14 h-14 bg-primary-600 rounded-full flex items-center justify-center">
          <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
          </svg>
        </div>
        <div>
          <h1 class="text-xl sm:text-2xl font-bold text-gray-900 group-hover:text-primary-700">
            {contact.name}
          </h1>
          <p class="text-sm text-gray-600 hidden sm:block">
            {contact.address.street}, {contact.address.city}
          </p>
        </div>
      </a>

      <!-- Search bar -->
      <div class="w-full sm:w-auto order-last sm:order-none">
        <SearchBar />
      </div>
    </div>
  </div>

  <!-- Navigation -->
  <Navigation />
</header>

<!-- Accessibility Panel (hidden by default) -->
<div
  id="accessibility-panel"
  class="fixed top-0 right-0 w-80 h-full bg-white shadow-2xl z-50 transform translate-x-full transition-transform duration-300"
  role="dialog"
  aria-labelledby="accessibility-title"
  aria-hidden="true"
>
  <div class="p-6">
    <div class="flex items-center justify-between mb-6">
      <h2 id="accessibility-title" class="text-xl font-bold text-gray-900">
        Toegankelijkheid
      </h2>
      <button
        id="close-accessibility-panel"
        class="p-2 text-gray-500 hover:text-gray-700 rounded-lg hover:bg-gray-100"
        aria-label="Sluiten"
      >
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
    </div>

    <!-- Text size slider -->
    <div class="mb-8">
      <label for="font-size-slider" class="block text-lg font-medium text-gray-900 mb-3">
        Tekstgrootte
      </label>
      <div class="flex items-center gap-4">
        <span class="text-sm">A</span>
        <input
          type="range"
          id="font-size-slider"
          min="100"
          max="150"
          step="10"
          value="100"
          class="flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
          aria-describedby="font-size-value"
        />
        <span class="text-xl font-bold">A</span>
      </div>
      <p id="font-size-value" class="text-center mt-2 text-gray-600">100%</p>
    </div>

    <!-- High contrast toggle -->
    <div class="mb-8">
      <label class="block text-lg font-medium text-gray-900 mb-3">
        Hoog contrast
      </label>
      <button
        id="contrast-toggle"
        class="w-full flex items-center justify-between p-4 border-2 border-gray-300 rounded-lg hover:border-primary-500 transition-colors"
        role="switch"
        aria-checked="false"
      >
        <span>Hoog contrast modus</span>
        <span id="contrast-indicator" class="w-12 h-6 bg-gray-300 rounded-full relative transition-colors">
          <span class="absolute left-1 top-1 w-4 h-4 bg-white rounded-full transition-transform"></span>
        </span>
      </button>
    </div>

    <!-- Reset button -->
    <button
      id="reset-accessibility"
      class="w-full py-3 px-4 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium"
    >
      Instellingen resetten
    </button>
  </div>
</div>

<!-- Overlay for accessibility panel -->
<div
  id="accessibility-overlay"
  class="fixed inset-0 bg-black/50 z-40 hidden"
  aria-hidden="true"
></div>
