---
import Navigation from './Navigation.astro';
import AccessibilityToggle from '../accessibility/AccessibilityToggle.astro';
import contact from '../../data/contact.json';
import { getUrl } from '../../utils/url';
---

<header class="bg-white no-print sticky top-0 z-50">
  <!-- Top bar with contact info -->
  <div class="bg-[var(--color-navy)] text-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex flex-wrap items-center justify-between py-2 sm:py-2.5 text-xs sm:text-sm">
        <div class="flex items-center gap-6">
          <span class="hidden md:flex items-center gap-2 font-light">
            <svg class="w-4 h-4 opacity-70" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
            </svg>
            {contact.address.street}, {contact.address.postal} {contact.address.city}
          </span>
          <a
            href={`tel:${contact.phone.replace('-', '')}`}
            class="flex items-center gap-2 hover:opacity-80 transition-opacity font-medium"
          >
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
            </svg>
            {contact.phone}
          </a>
        </div>
        <div class="flex items-center gap-4">
          <a
            href={`mailto:${contact.email}`}
            class="hidden sm:flex items-center gap-2 hover:opacity-80 transition-opacity font-light text-sm"
          >
            <svg class="w-4 h-4 opacity-70" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
            </svg>
            {contact.email}
          </a>
          <div class="h-4 w-px bg-white/30 hidden sm:block"></div>
          <AccessibilityToggle />
        </div>
      </div>
    </div>
  </div>

  <!-- Main header with logo and navigation -->
  <div class="border-b border-[var(--color-navy-lighter)]">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between py-3 sm:py-4">
        <!-- Logo and practice name -->
        <a href={getUrl('/')} class="flex items-center gap-2 sm:gap-4 group min-w-0">
          <div class="w-10 h-10 sm:w-12 sm:h-12 bg-[var(--color-purple)] rounded-xl flex items-center justify-center shadow-md group-hover:shadow-lg transition-shadow flex-shrink-0">
            <svg class="w-6 h-6 sm:w-7 sm:h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.697 50.697 0 0112 13.489a50.702 50.702 0 017.74-3.342M6.75 15a.75.75 0 100-1.5.75.75 0 000 1.5zm0 0v-3.675A55.378 55.378 0 0112 8.443m-7.007 11.55A5.981 5.981 0 006.75 15.75v-1.5"></path>
            </svg>
          </div>
          <div class="min-w-0">
            <h1 class="text-base sm:text-xl font-bold text-[var(--color-navy)] group-hover:text-[var(--color-purple)] transition-colors truncate">
              {contact.name}
            </h1>
            <p class="text-sm text-[var(--color-navy-light)] font-light hidden sm:block">
              Uw huisarts in {contact.address.city}
            </p>
          </div>
        </a>

        <!-- CTA Buttons (desktop) -->
        <div class="hidden md:flex items-center gap-3">
          <a
            href={getUrl('/afspraak-maken')}
            class="btn btn-secondary btn-sm"
          >
            Afspraak maken
          </a>
          <a
            href={getUrl('/herhaalrecepten')}
            class="btn btn-primary btn-sm"
          >
            Herhaalrecept
          </a>
        </div>

        <!-- Mobile menu button -->
        <button
          id="mobile-menu-button"
          class="md:hidden p-2 rounded-lg hover:bg-[var(--color-bg-soft)] transition-colors"
          aria-label="Menu openen"
          aria-expanded="false"
        >
          <svg class="w-6 h-6 text-[var(--color-navy)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Navigation -->
  <Navigation />
</header>

<!-- Accessibility Panel (hidden by default) -->
<div
  id="accessibility-panel"
  class="fixed top-0 right-0 w-full sm:w-96 h-full bg-white shadow-2xl z-[60] transform translate-x-full transition-transform duration-300"
  role="dialog"
  aria-labelledby="accessibility-title"
  aria-hidden="true"
>
  <div class="p-6 h-full overflow-y-auto">
    <div class="flex items-center justify-between mb-8">
      <h2 id="accessibility-title" class="text-xl font-bold text-[var(--color-navy)]">
        Toegankelijkheid
      </h2>
      <button
        id="close-accessibility-panel"
        class="p-2 text-[var(--color-navy-light)] hover:text-[var(--color-navy)] rounded-lg hover:bg-[var(--color-bg-soft)] transition-colors"
        aria-label="Sluiten"
      >
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
    </div>

    <!-- Text size slider -->
    <div class="mb-8">
      <label for="font-size-slider" class="block text-base font-semibold text-[var(--color-navy)] mb-4">
        Tekstgrootte
      </label>
      <div class="flex items-center gap-4 bg-[var(--color-bg-soft)] rounded-xl p-4">
        <span class="text-sm text-[var(--color-navy-light)]">A</span>
        <input
          type="range"
          id="font-size-slider"
          min="100"
          max="150"
          step="10"
          value="100"
          class="flex-1 h-2 bg-white rounded-lg appearance-none cursor-pointer accent-[var(--color-purple)]"
          aria-describedby="font-size-value"
        />
        <span class="text-xl font-bold text-[var(--color-navy)]">A</span>
      </div>
      <p id="font-size-value" class="text-center mt-3 text-[var(--color-navy-light)] font-medium">100%</p>
    </div>

    <!-- High contrast toggle -->
    <div class="mb-8">
      <label class="block text-base font-semibold text-[var(--color-navy)] mb-4">
        Hoog contrast
      </label>
      <button
        id="contrast-toggle"
        class="w-full flex items-center justify-between p-4 bg-[var(--color-bg-soft)] rounded-xl hover:bg-[var(--color-blue-light)] transition-colors"
        role="switch"
        aria-checked="false"
      >
        <span class="font-medium text-[var(--color-navy)]">Hoog contrast modus</span>
        <span id="contrast-indicator" class="w-14 h-7 bg-white rounded-full relative transition-colors shadow-inner">
          <span class="absolute left-1 top-1 w-5 h-5 bg-[var(--color-navy-light)] rounded-full transition-all duration-200"></span>
        </span>
      </button>
    </div>

    <!-- Reset button -->
    <button
      id="reset-accessibility"
      class="w-full btn btn-outline btn-md"
    >
      Instellingen resetten
    </button>

    <!-- Info text -->
    <p class="mt-8 text-sm text-[var(--color-navy-light)] font-light leading-relaxed">
      Deze website is ontworpen met toegankelijkheid in gedachten. Heeft u suggesties voor verbeteringen?
      Neem dan contact met ons op.
    </p>
  </div>
</div>

<!-- Overlay for accessibility panel -->
<div
  id="accessibility-overlay"
  class="fixed inset-0 bg-black/40 z-[55] hidden backdrop-blur-sm"
  aria-hidden="true"
></div>
