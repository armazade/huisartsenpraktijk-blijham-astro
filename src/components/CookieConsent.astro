---
---

<div
  id="cookie-banner"
  class="cookie-banner hidden"
  role="dialog"
  aria-labelledby="cookie-title"
  aria-describedby="cookie-description"
>
  <div class="max-w-4xl mx-auto">
    <div class="flex flex-col lg:flex-row lg:items-center gap-4">
      <div class="flex-1">
        <h2 id="cookie-title" class="font-bold text-lg text-gray-900 mb-2">
          Cookieverklaring
        </h2>
        <p id="cookie-description" class="text-gray-700">
          Deze website gebruikt functionele cookies om de website goed te laten werken.
          Daarnaast gebruiken we analytische cookies (Plausible) om anoniem bezoekersstatistieken
          bij te houden. Deze gegevens worden niet gedeeld met derden.
        </p>
      </div>

      <div class="flex flex-wrap gap-3">
        <button
          id="cookie-accept-all"
          class="px-6 py-3 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 transition-colors"
        >
          Alles accepteren
        </button>
        <button
          id="cookie-reject-all"
          class="px-6 py-3 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors"
        >
          Alles weigeren
        </button>
        <a
          href="/privacy#cookies"
          class="px-6 py-3 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:border-gray-400 transition-colors inline-flex items-center"
        >
          Zelf instellen
        </a>
      </div>
    </div>
  </div>
</div>

<script>
  const cookieBanner = document.getElementById('cookie-banner');
  const acceptAllButton = document.getElementById('cookie-accept-all');
  const rejectAllButton = document.getElementById('cookie-reject-all');

  // Check if user has already made a choice
  const cookieChoice = localStorage.getItem('cookieConsent');

  if (!cookieChoice) {
    // Show banner if no choice has been made
    cookieBanner?.classList.remove('hidden');
  }

  function hideBanner(): void {
    cookieBanner?.classList.add('hidden');
  }

  function saveChoice(choice: 'accepted' | 'rejected'): void {
    localStorage.setItem('cookieConsent', choice);
    localStorage.setItem('cookieConsentDate', new Date().toISOString());
    hideBanner();

    // If rejected, disable Plausible tracking
    if (choice === 'rejected') {
      localStorage.setItem('plausible_ignore', 'true');
    } else {
      localStorage.removeItem('plausible_ignore');
    }
  }

  acceptAllButton?.addEventListener('click', () => {
    saveChoice('accepted');
  });

  rejectAllButton?.addEventListener('click', () => {
    saveChoice('rejected');
  });

  // Handle keyboard escape
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && !cookieBanner?.classList.contains('hidden')) {
      // Don't hide on escape - user must make a choice
      // But focus the accept button for accessibility
      acceptAllButton?.focus();
    }
  });
</script>
